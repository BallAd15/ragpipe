prompts:
  qa2: |
    The following are snippets from an insurance policy document in markdown format.
    # documents

    {documents}

    Answer the following query based on the above document snippets.

    {query}
    Answer:
encoders:
  bge_small:
    name: BAAI/bge-small-en-v1.5
    dtype: tensor<float>[384]
  splade:
    dtype: sparsetensor<float>
    name: prithivida/Splade_PP_en_v1
  stf:
    name: sentence-transformers/all-MiniLM-L6-v2
    dtype: tensor<float>[384]
  colbert:
    name: colbert-ir/colbertv2.0 
    dtype: tensor<float>[?,384]

representations:
    query.text:
        dense: {encoder: bge_small} 
        sparse: {encoder: splade}

    .documents[].description:
        dense: {encoder: bge_small, store: true}
        sparse: {encoder: splade}

bridges:
  b_dense:
      repnodes: query.text#dense, .documents[].description#dense
      limit: 10
  b_sparse:
     repnodes: query.text#sparse, .documents[].description#sparse
     limit: 10


merges:
  c1:
    expr: b_dense
    limit: 10
  c2:
    method: reciprocal_rank
    bridges: b_dense, b_sparse
    limit: 10

enabled_merges: c1

